<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>SDPI Test</title>

    <script type="module" src="/build/sdpi-components.esm.js"></script>
    <script nomodule src="/build/sdpi-components.js"></script>
    <link rel="stylesheet" href="/build/sdpi-components.css">
</head>

<body>
    <div class="test-wrapper">
        <sd-root>
            <sd-input label="Name"></sd-input>
            <sd-input 
                label="IP-Address" 
                placeholder="e.g. 192.168.61.1" 
                required=true 
                pattern="\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}"
                alt-text="This field lets you enter an IP-Adress. The little exclamation mark changes to a checkmark, if the condition is met (e.g. you entered an IP-address.)."
            ></sd-input>
            <sd-input label="Password" type="password" placeholder="Enter your password"></sd-input>
            <sd-input 
                label="Email" 
                type="email" 
                placeholder="Enter your email-address"
                pattern="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"
            ></sd-input>
            <sd-input label="Number" type="number"></sd-input>

            <sd-header>TEXTAREAS</sd-header>
            <sd-textarea label="Message with info-box" maxlength=50></sd-textarea>
            <sd-textarea label="Message only"></sd-textarea>

            <sd-header>CANVAS</sd-header>
            <sd-canvas id="canvastest" label="Canvas"></sd-canvas>
            <sd-details include-label=true summary="Info" opened=true inner-margins=false>
                <p>To draw with the mouse, press/hold the alt key.</p>
                <p>To refresh the canvas, press shift and click.</p>
            </sd-details>

            <sd-header>BUTTONS</sd-header>
            <sd-button label="Button" value="Click Me"></sd-button>
            <sd-button label="Button" value="Click Me max20" fill=false>Click Me</sd-button>
            <sd-group label="2 Buttons">
                <sd-button include-label=false value="Click Me"></sd-button>
                <sd-button include-label=false value="Or Me"></sd-button>
            </sd-group>

            <sd-header>SELECTS</sd-header>
            <sd-select label="Select" options='[{"type":"optgroup","label":"Women","options":[{"type":"option","value":"janedoe@example.com","text":"Jane Doe"},{"type":"option","value":"tinatank@example.com","text":"Some Girl"},{"type":"option","value":"yoko@example.com","text":"Yoko Hama"}]},{"type":"optgroup","label":"Men","options":[{"type":"option","value":"johndoe@example.com","text":"John Doe"},{"type":"option","value":"triptronic@example.com","text":"Some Man"},{"type":"option","value":"kingofprawns@example.com","text":"Another Chap"}]}]'></sd-select>
            <sd-group label="Combo">
                <sd-select include-label=false options='[{"type":"option", "value":"janedoe@example.com","text":"Jane Doe"},{"type":"option", "value":"someguy@example.com","text":"Some Guy"}]'></sd-select>
                <sd-button include-label=false value="Click Me"></sd-button>
            </sd-group>

            <sd-header>CHECKBOXES &amp; RADIO</sd-header>
            <sd-checkbox label="Light" checked=true value="on"></sd-checkbox>
            <sd-checkbox-group label="Select day">
                <sd-checkbox include-label=false value="Monday"></sd-checkbox>
                <sd-checkbox include-label=false value="Tuesday"></sd-checkbox>
                <sd-checkbox include-label=false value="Wednesday"></sd-checkbox>
                <sd-checkbox include-label=false value="Thursday" checked></sd-checkbox>
                <sd-checkbox include-label=false value="Friday"></sd-checkbox>
                <sd-checkbox include-label=false value="Saturday"></sd-checkbox>
            </sd-checkbox-group>

            <hr>

            <sd-radio-group label="Adjust Radio">
                <sd-radio-button></sd-radio-button>
            </sd-radio-group>
        </sd-root>
        <div class="sdpi-wrapper">

            <div class="sdpi-item" id="your_name">
                <div class="sdpi-item-label">Name</div>
                <input class="sdpi-item-value" type="text" id="mynameinput" value="">
            </div>

            <div class="sdpi-item" id="your_name_required"
                title="This field lets you enter an IP-Adress. The little exclamation mark changes to a checkmark, if the condition is met (e.g. you entered an IP-address.).">
                <div class="sdpi-item-label">IP-Address</div>
                <input class="sdpi-item-value" id="myrequirednameinput" value="" placeholder="e.g. 192.168.61.1"
                    required pattern="\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}">
            </div>

            <div class="sdpi-item" id="your_password">
                <div class="sdpi-item-label">Password</div>
                <input type="password" id="mypassword" class="sdpi-item-value" value=""
                    placeholder="Enter your password">
            </div>

            <div class="sdpi-item" id="your_email">
                <div class="sdpi-item-label">Email</div>
                <input type="email" class="sdpi-item-value" id="myemail" value="" placeholder="Enter your email-address"
                    pattern="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?">
            </div>

            <div class="sdpi-item" id="anumber">
                <div class="sdpi-item-label">Number</div>
                <input class="sdpi-item-value" id="mynumber" inputmode="numeric" pattern="[0-9]*" type="number"
                    name="creditcard">
            </div>

            <div class="sdpi-heading">TEXTAREAS</div>

            <div type="textarea" class="sdpi-item" id="messagegroup_message">
                <div class="sdpi-item-label up20">Message with <mark>info-box</mark></div>
                <div class="sdpi-item-value textarea">
                    <textarea type="textarea" maxlength="50" id="textarea12"></textarea>
                    <label for="textarea12">0/50</label>
                </div>
            </div>

            <div type="textarea" class="sdpi-item" id="message_only">
                <div class="sdpi-item-label">Message only</div>
                <span class="sdpi-item-value textarea">
                    <textarea type="textarea" id="textarea_message_only"></textarea>
                </span>
            </div>

            <div class="sdpi-heading">CANVAS</div>

            <div class="sdpi-item" type="canvas" id="your_canvas">
                <div class="sdpi-item-label">Canvas</div>
                <canvas class="sdpi-item-value" width="144" height="144" type="canvas" value=""></canvas>
            </div>
            <div class="sdpi-item alignTop">
                <div class="sdpi-item-label empty"></div>
                <details open class="noInnerMargins">
                    <summary>Info</summary>
                    <p>To draw with the mouse, press/hold the alt key.</p>
                    <p>To refresh the canvas, press shift and click.</p>
                </details>
            </div>

            <div class="sdpi-heading runningAppsContainer">MONITORED APPS</div>
            <div id="runningAppsContainer"></div>

            <div class="sdpi-heading">BUTTONS</div>

            <div class="sdpi-item" id="only_a_button">
                <div class="sdpi-item-label">Button</div>
                <button onclick="openMeExternal()" class="sdpi-item-value" value="Click Me only">Click Me</button>
            </div>

            <div class="sdpi-item" id="tiny_button">
                <div class="sdpi-item-label">Name</div>
                <button class="sdpi-item-value max20" value="Click Me max20">Click Me</button>
            </div>

            <div class="sdpi-item" id="2buttons">
                <div class="sdpi-item-label">2 Buttons</div>
                <button class="sdpi-item-value" value="ClickMe">Click Me</button>
                <button class="sdpi-item-value" value="OrMe">Or Me</button>
            </div>

            <div class="sdpi-heading">SELECTS</div>

            <div class="sdpi-item" id="select_single">
                <div class="sdpi-item-label">Select</div>
                <select class="sdpi-item-value select">
                    <optgroup label="Women">
                        <option value="janedoe@example.com">Jane Doe</option>
                        <option value="tinatank@example.com">Some Girl</option>
                        <option value="yoko@example.com">Yoko Hama</option>
                    </optgroup>
                    <optgroup label="Men">
                        <option value="johndoe@example.com">John Doe</option>
                        <option value="tiptronic@example.com">Some Man</option>
                        <option value="kingofprawns@example.com">Another Chap</option>
                    </optgroup>

                </select>
            </div>

            <div class="sdpi-item" id="select_combo">
                <div class="sdpi-item-label">Combo</div>
                <select class="sdpi-item-value select">
                    <option value="janedoe@example.com">Jane Doe</option>
                    <option value="someguy@example.com">Some Guy</option>
                </select>
                <button class="sdpi-item-value" value="ClickMe">Click Me</button>
            </div>

            <div class="sdpi-heading">CHECKBOXES & RADIO</div>
            <div type="checkbox" class="sdpi-item" id="single-check">
                <div class="sdpi-item-label">Light</div>
                <div class="sdpi-item-value">
                    <div class="sdpi-item-child">
                        <input id="singlechk" type="checkbox" value="on">
                        <label for="singlechk" class="sdpi-item-label"><span></span>on</label>
                    </div>
                </div>
            </div>

            <div type="checkbox" class="sdpi-item" id="multi-items">
                <div class="sdpi-item-label">Select day</div>
                <div class="sdpi-item-value min100">
                    <div class="sdpi-item-child">
                        <input id="days1" type="checkbox" value="Monday">
                        <label for="days1" class="sdpi-item-label"><span></span>Monday</label>
                    </div>
                    <div class="sdpi-item-child">
                        <input id="days2" type="checkbox" value="Tuesday">
                        <label for="days2" class="sdpi-item-label"><span></span>Tuesday</label>
                    </div>
                    <div class="sdpi-item-child">
                        <input id="days3" type="checkbox" value="Wednesday">
                        <label for="days3" class="sdpi-item-label"><span></span>Wednesday</label>
                    </div>
                    <div class="sdpi-item-child">
                        <input id="days4" type="checkbox" value="Thursday" checked>
                        <label for="days4" class="sdpi-item-label"><span></span>Thursday</label>
                    </div>
                    <div class="sdpi-item-child">
                        <input id="days5" type="checkbox" value="Friday">
                        <label for="days5" class="sdpi-item-label"><span></span>Friday</label>
                    </div>
                    <div class="sdpi-item-child">
                        <input id="days6" type="checkbox" value="Saturday">
                        <label for="days6" class="sdpi-item-label"><span></span>Saturday</label>
                    </div>
                </div>
            </div>

            <hr>

            <div type="radio" class="sdpi-item" id="adjust_radio">
                <div class="sdpi-item-label">Adjust Radio</div>
                <div class="sdpi-item-value ">
                    <div class="sdpi-item-child">
                        <input id="rdio1" type="radio" name="rdio">
                        <label for="rdio1" class="sdpi-item-label"><span></span>on</label>
                    </div>
                    <div class="sdpi-item-child">
                        <input id="rdio2" type="radio" value="off" name="rdio" checked>
                        <label for="rdio2" class="sdpi-item-label"><span></span>off</label>
                    </div>
                    <div class="sdpi-item-child">
                        <input id="rdio3" type="radio" value="mute" name="rdio">
                        <label for="rdio3" class="sdpi-item-label"><span></span>mute</label>
                    </div>
                </div>
            </div>

            <div class="sdpi-heading">COLOR</div>

            <div type="color" class="sdpi-item" id="colorselection">
                <div class="sdpi-item-label">Color</div>
                <input type="color" class="sdpi-item-value" value="#3333cc">
            </div>

            <div class="sdpi-heading">RANGE</div>

            <div type="range" class="sdpi-item" id="myfirstrange">
                <div class="sdpi-item-label">Range</div>
                <div class="sdpi-item-value">
                    <input class="floating-tooltip" data-suffix="%" type="range" min="0" max="100" value=17>
                </div>
            </div>

            <div type="range" class="sdpi-item" id="range_with_meters">
                <div class="sdpi-item-label">Range (with label)</div>
                <div class="sdpi-item-value">
                    <span class="clickable" value=0>0</span>
                    <input class="floating-tooltip" data-suffix="K" type="range" min="5" max="100" value=74>
                    <span class="clickable" value="100">100</span>
                </div>
            </div>

            <div type="range" class="sdpi-item" id="range_with_datalist">
                <div class="sdpi-item-label">Range (with datalist)</div>
                <div class="sdpi-item-value">
                    <span class="clickable" value="0">0</span>
                    <input type="range" min="0" max="100" step="25" value="75" list="steplist">
                    <datalist id="steplist">
                        <option>25</option>
                        <option>50</option>
                        <option>75</option>
                    </datalist>
                    <span class="clickable" value="100">100</span>
                </div>
            </div>

            <div class="sdpi-heading">Meters</div>

            <div class="sdpi-item" type="progress" id="meter">
                <div class="sdpi-item-label">Meter</div>
                <meter class="floating-tooltip" class="sdpi-item-value" value="0.6"></meter>
            </div>

            <hr>

            <div class="sdpi-item" type="progress" id="multimeter">
                <div class="sdpi-item-label">Meter (multi)</div>
                <meter class="sdpi-item-value" value="0.6"></meter>
                <meter class="sdpi-item-value" value="0.2"></meter>
                <meter class="sdpi-item-value" value="0.8"></meter>
            </div>

            <hr>

            <div class="sdpi-item" type="meter" id="meter_full">
                <div class="sdpi-item-label">Meter (full)</div>
                <div class="sdpi-item-value sdpi-item-group" id="metergroup">
                    <meter class="sdpi-item-value full" value="0.4"></meter>
                    <meter class="sdpi-item-value full" value="0.2"></meter>
                    <meter class="sdpi-item-value full" value="0.7"></meter>
                </div>
            </div>

            <hr>

            <div class="sdpi-item" type="meter" id="meter_with_labels">
                <div class="sdpi-item-label">Meter (with labels)</div>
                <div class="sdpi-item-value sdpi-item-group" id="metergroup">
                    <div class="sdpi-item-child">
                        <span for="meter1">0</span>
                        <meter id="meter1" class="sdpi-item-value full" value="0.4"></meter>
                        <span for="meter1">100</span>
                    </div>
                    <div class="sdpi-item-child">
                        <span>-17</span>
                        <meter class="sdpi-item-value full" value="0.2"></meter>
                        <span>37.2</span>
                    </div>
                    <div class="sdpi-item-child">
                        <span>Min</span>
                        <meter class="sdpi-item-value full" value="0.7"></meter>
                        <span>Max</span>
                    </div>
                </div>
            </div>

            <div class="sdpi-heading">Progress</div>

            <div class="sdpi-item" type="progress" id="progress">
                <div class="sdpi-item-label">Progress</div>
                <progress class="sdpi-item-value" value="0.6" max="1"></progress>
            </div>

            <hr>

            <div class="sdpi-item" type="progress" id="multiprogress">
                <div class="sdpi-item-label">Progress</div>
                <progress class="sdpi-item-value" value="0.6" max="1"></progress>
                <progress class="sdpi-item-value" value="0.2" max="1"></progress>
                <progress class="sdpi-item-value" value="0.8" max="1"></progress>
            </div>

            <hr>

            <div class="sdpi-item" type="progress" id="progress_full">
                <div class="sdpi-item-label">Progress (full)</div>
                <div class="sdpi-item-value sdpi-item-group" id="metergroup">
                    <progress class="sdpi-item-value full" value="0.4" val="1"></progress>
                    <progress class="sdpi-item-value full" value="0.2" val="1"></progress>
                    <progress class="sdpi-item-value full" value="0.7" val="1"></progress>
                </div>
            </div>
            <hr>

            <div class="sdpi-item" type="progress" id="progress_with_labels">
                <div class="sdpi-item-label">Progress (with labels)</div>
                <div class="sdpi-item-value sdpi-item-group" id="progressgroup">
                    <div class="sdpi-item-child">
                        <span for="progress1">0</span>
                        <progress id="progress1" class="sdpi-item-value full" value="0.4"></progress>
                        <span for="progress1">100</span>
                    </div>
                    <div class="sdpi-item-child">
                        <span>-17</span>
                        <progress class="sdpi-item-value full" value="0.2"></progress>
                        <span>37.2</span>
                    </div>
                    <div class="sdpi-item-child">
                        <span>Min</span>
                        <progress class="sdpi-item-value full" value="0.7"></progress>
                        <span>Max</span>
                    </div>
                </div>
            </div>

            <div class="sdpi-heading">LISTS</div>

            <div type="list" class="sdpi-item list" id="unorderedListContainer">
                <div class="sdpi-item-label">List (unordered)</div>
                <ul class="sdpi-item-value no-select" id="unorderedList">
                    <li>Milk</li>
                    <li>Bread</li>
                    <li>Chocolate</li>
                    <li>More chocolate</li>
                </ul>
            </div>

            <div type="list" class="sdpi-item list" id="unorderedListContainer">
                <div class="sdpi-item-label">List (flex)</div>
                <ul class="sdpi-item-value two-items" id="unorderedList">
                    <li><span>Milk</span><span>1 liter</span></li>
                    <li><span>Bread</span><span>1 slice</span></li>
                    <li><span>Chocolate</span><span>lots of</span></li>
                    <li><span>More</span><span>things...</span></li>
                </ul>
            </div>

            <hr>

            <div type="list" class="sdpi-item list" id="orderedListContainer">
                <div class="sdpi-item-label">List (single select)</div>
                <ol class="sdpi-item-value single-select" id="orderedList1" type="decimal">
                    <li>Milk</li>
                    <li>Bread</li>
                    <li>Chocolate</li>
                    <li>More chocolate</li>
                </ol>
            </div>

            <hr>

            <div type="list" class="sdpi-item list" id="orderedListContainer">
                <div class="sdpi-item-label">List (multi select)</div>
                <ol class="sdpi-item-value multi-select" id="orderedList2" type="lower-alpha">
                    <li>Coke</li>
                    <li>Sprite</li>
                    <li>Juice</li>
                    <li>Water</li>
                    <li>Mocktail</li>
                    <li>Smoothies</li>
                    <li>Milk</li>
                    <li>Tea</li>
                    <li>Coffee</li>
                </ol>
            </div>

            <div class="sdpi-heading">TABLES</div>

            <div class="sdpi-item" id="tableid">
                <div class="sdpi-item-label">Table (no-select)</div>
                <table class="sdpi-item-value no-select" width="100%">
                    <caption>Table without selection</caption>
                    <tr>
                        <td>One</td>
                        <td>Two</td>
                        <td>Three</td>
                    </tr>
                    <tr>
                        <td>1.00</td>
                        <td>2.00</td>
                        <td>3.00</td>
                    </tr>
                    <tr>
                        <td>west</td>
                        <td>east</td>
                        <td>south</td>
                    </tr>
                </table>
            </div>

            <div class="sdpi-item" id="tableid1">
                <div class="sdpi-item-label">Table (single-select)</div>
                <table class="sdpi-item-value" width="100%">
                    <caption>Table with single selection</caption>
                    <tr>
                        <td>Four</td>
                        <td>Five</td>
                        <td>Six</td>
                    </tr>
                    <tr>
                        <td>4.00</td>
                        <td>5.00</td>
                        <td>6.50</td>
                    </tr>
                    <tr>
                        <td>west</td>
                        <td>east</td>
                        <td>south</td>
                    </tr>
                </table>
            </div>

            <div class="sdpi-item" id="tableid2">
                <div class="sdpi-item-label">Table (multi-select)</div>
                <table class="sdpi-item-value multi-select" width="100%">
                    <caption>Table with multi selection</caption>
                    <tr>
                        <td>Seven</td>
                        <td>Eight</td>
                        <td>Nine</td>
                    </tr>
                    <tr>
                        <td>7.00</td>
                        <td>8.00</td>
                        <td>9.99</td>
                    </tr>
                    <tr>
                        <td>west</td>
                        <td>east</td>
                        <td>south</td>
                    </tr>
                </table>
            </div>

            <div class="sdpi-heading">DATE/TIME</div>

            <div class="sdpi-item" id="date">
                <div class="sdpi-item-label">Date</div>
                <input class="sdpi-item-value" type="date" value="2019-01-15">
            </div>

            <div class="sdpi-item" id="daterange">
                <div class="sdpi-item-label">Date range</div>
                <input class="sdpi-item-value" id="when" name="when" type="date" min="2018-12-01" max="2019-02-01"
                    value="2018-12-31">
            </div>

            <div class="sdpi-item" id="month">
                <div class="sdpi-item-label">Month</div>
                <input class="sdpi-item-value" type="month" value="2019-01">
            </div>

            <div class="sdpi-item" id="month">
                <div class="sdpi-item-label">Month (with list)</div>
                <input class="sdpi-item-value" type="month" value="2019-02" list="months">
                <datalist id="months">
                    <option label="Neil on the moon">1967-07</option>
                    <option label="First month of this century">2000-01</option>
                    <option label="Last month of last century">1999-12</option>
                    <option label="Last month of 2019">2019-12</option>
                </datalist>
            </div>

            <div class="sdpi-item" id="week">
                <div class="sdpi-item-label">Week</div>
                <input class="sdpi-item-value" type="week" value="2019-W02" list="weeks">
                <datalist id="weeks">
                    <option label="First week of 2019">2019-W01</option>
                    <option label="Second week of 2019">2019-W02</option>
                    <option label="Fifth week of 2019">2019-W05</option>
                    <option label="24th week of 2019">2019-W24</option>
                    <option label="Last week of 2019">2019-W52</option>
                </datalist>
            </div>


            <div class="sdpi-item" id="time">
                <div class="sdpi-item-label">Time</div>
                <input class="sdpi-item-value" type="time" value="09:42">
            </div>

            <div class="sdpi-item" id="localdatetime">
                <div class="sdpi-item-label">Datetime local</div>
                <input class="sdpi-item-value" type="datetime-local" value="2019-01-06T12:22">
            </div>


            <div class="sdpi-heading">FILE</div>

            <div class="sdpi-item" id="my_private_file_selector">
                <div class="sdpi-item-label">Select File</div>
                <div class="sdpi-item-group file" id="filepickergroup">
                    <input class="sdpi-item-value" type="file" id="elgfilepicker" accept=".jpg, .jpeg, .png">
                    <label class="sdpi-file-info" for="elgfilepicker">no file...</label>
                    <label class="sdpi-file-label" for="elgfilepicker">Choose file...</label>
                </div>
            </div>

            <div class="sdpi-heading">GROUPS</div>

            <div type="group" class="sdpi-item" id="messagegroup">
                <div class="sdpi-item-label">Send A Message</div>
                <div class="sdpi-item-group" id="messagegroup_items">
                    <div type="select" class="sdpi-item" id="messagegroup_account">
                        <div class="sdpi-item-label">Account ID</div>
                        <select class="sdpi-item-value select">
                            <option value="janedoe@example.com">Jane Doe</option>
                            <option value="someguy@example.com">Some Guy</option>
                            <option value="anotherchap@example.com">Another Chap</option>
                        </select>
                    </div>
                    <div type="textarea" class="sdpi-item" id="messagegroup_message">
                        <div class="sdpi-item-label up20">Message</div>
                        <div class="sdpi-item-value textarea">
                            <textarea type="textarea" maxlength="50" id="textarea11"></textarea>
                            <label for="textarea11" id="textarea11_counter">123/456</label>

                        </div>
                    </div>
                </div>
            </div>

            <hr>

            <div type="group" class="sdpi-item" id="mycolorgroup">
                <div class="sdpi-item-label">Grouped Colors</div>
                <div class="sdpi-item-group" id="colortransition">
                    <div type="color" class="sdpi-item" id="startcolor">
                        <div class="sdpi-item-label">Startcolor</div>
                        <input type="color" class="sdpi-item-value" value="#000000">
                    </div>
                    <div type="color" class="sdpi-item" id="endcolor">
                        <div class="sdpi-item-label">Endcolor</div>
                        <input type="color" class="sdpi-item-value" value="#efefef">
                    </div>
                </div>
            </div>

            <div class="sdpi-heading">Message</div>

            <div class="sdpi-item">
                <details class="message question">
                    <summary>This is some message</summary>
                    <h4>Information:</h4>
                    <p>In this area you can type some information to your user.</p>
                    <a class="info" href="#">Click here</a>
                </details>
            </div>


            <div class="sdpi-heading">DETAILS</div>

            <div class="sdpi-item">
                <div class="sdpi-item-label">Details</div>
                <details class="sdpi-item-value">
                    <summary>Wrapped Details</summary>
                    <p>If you like to show details aligned with other controls, you can simply wrap the details-item
                        into a regular 'sdpi-item-value'</p>
                    <p>In this case, details are auto-aligned with the sdpi-item-value controls above.</p>
                    <p>....</p>
                </details>
            </div>

            <details>
                <summary>More Info</summary>
                <p>These samples are provided by Elgato Systems 'as is'.</p>
                <p>You are encouraged to use these samples (or this plugin) as a starter for your own ideas. (Just keep
                    in mind to read the SDK-documentation and/or - at least - <mark>change the UUID in the
                        manifest.json</mark> ðŸ˜‰ )</p>
                <p>To find out how things are working, just open the 'index_pi.html' included in this plugin and compare
                    to what's shown in StreamDeck</p>
                <h4>Scripts</h4>
                <p>There's an index_pi.js file, which makes this sample interactive and sends changes to the Stream Deck
                    plugin.</p>
                <p>This is a very convenient (although not optimized) way to communicate from Property Inspector to your
                    plugin.
                    If you think you have a better solution, please feel free to reach out and send your ideas.</p>
                <h4>Other</h4>
                <p>We hope you enjoy extending your Stream Deck and are pretty curious what you will do with it.</p>
                <p>Enjoy</p>
                <p>Your Elgato Gaming chaps</p>
            </details>


            <div class="sdpi-heading">CAROUSEL</div>

            <div type="carousel" class="sdpi-item" id="mycarousel">
                <div type="carousel" class="card-carousel-wrapper">
                    <div disabled="disabled" class="card-carousel--nav__left"></div>
                    <div class="card-carousel">
                        <div class="card-carousel--overflow-container">
                            <div class="card-carousel-cards" style="transform: translateX(0px);">
                                <div class="card-carousel--card" value="Game Capture">
                                    <div class="card-carousel--card--footer">Game Capture</div>
                                </div>
                                <div class="card-carousel--card" value="Control Center">
                                    <div class="card-carousel--card--footer">Control Center</div>
                                </div>
                                <div class="card-carousel--card" value="Green Screen">
                                    <div class="card-carousel--card--footer">Green Screen</div>
                                </div>
                                <div class="card-carousel--card" value="Key Creator">
                                    <div class="card-carousel--card--footer">Key Creator</div>
                                </div>
                                <div class="card-carousel--card" value="HD60 Pro">
                                    <div class="card-carousel--card--footer">HD60 Pro</div>
                                </div>
                                <div class="card-carousel--card" value="HD60">
                                    <div class="card-carousel--card--footer">HD60</div>
                                </div>
                                <div class="card-carousel--card" value="Stream Deck">
                                    <div class="card-carousel--card--footer">Stream Deck</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-carousel--nav__right"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        setInterval(async () => {
            const el = document.getElementById("canvastest");
            const canvas = await el.getCanvas();
            const ctx = canvas.getContext("2d");
            ctx.fillStyle = "#FFFFFF";
            ctx.fillRect(0, 0, 144, 144);
        }, 100);

        // this is our global websocket, used to communicate from/to Stream Deck software
        // and some info about our plugin, as sent by Stream Deck software
        var websocket = null,
            uuid = null,
            actionInfo = {},
            inInfo = {},
            runningApps = [],
            settings = {},
            isQT = navigator.appVersion.includes('QtWebEngine'),
            onchangeevt = 'onchange'; // 'oninput'; // change this, if you want interactive elements act on any change, or while they're modified

        function connectElgatoStreamDeckSocket(inPort, inUUID, inRegisterEvent, inInfo, inActionInfo) {
            uuid = inUUID;
            // please note: the incoming arguments are of type STRING, so
            // in case of the inActionInfo, we must parse it into JSON first
            actionInfo = JSON.parse(inActionInfo); // cache the info
            inInfo = JSON.parse(inInfo);
            websocket = new WebSocket('ws://127.0.0.1:' + inPort);

            /** Since the PI doesn't have access to your OS native settings
             * Stream Deck sends some color settings to PI
             * We use these to adjust some styles (e.g. highlight-colors for checkboxes)
             */
            addDynamicStyles(inInfo.colors, 'connectElgatoStreamDeckSocket');

            /** let's see, if we have some settings */
            settings = getPropFromString(actionInfo, 'payload.settings', false);
            console.log(settings, actionInfo);
            initPropertyInspector(5);

            // if connection was established, the websocket sends
            // an 'onopen' event, where we need to register our PI
            websocket.onopen = function () {
                var json = {
                    event: inRegisterEvent,
                    uuid: inUUID
                };
                // register property inspector to Stream Deck
                websocket.send(JSON.stringify(json));
                // demoCanvas();
            };

            websocket.onmessage = function (evt) {
                // Received message from Stream Deck
                var jsonObj = JSON.parse(evt.data);
                var event = jsonObj['event'];
                if (getPropFromString(jsonObj, 'payload.runningApps') && event === 'sendToPropertyInspector') {
                    sdpiCreateList(document.querySelector('#runningAppsContainer'), {
                        id: 'runningAppsID',
                        label: 'Running Apps',
                        value: jsonObj.payload.runningApps,
                        type: 'list',
                        selectionType: 'no-select'
                    });
                }
            };
        }

        window.addEventListener('message', function (ev) {
            console.log('External window received message:  ', ev.data, typeof ev.data);
            if (ev.data === 'initPropertyInspector') {
                initPropertyInspector(5);
            }
        }, false);

        function openMeExternal() {
            window.xtWindow = window.open('index_pi.html', "PI Samples");
            setTimeout(() => window.xtWindow.postMessage('initPropertyInspector', '*'), 1500);
        }

        function initPropertyInspector(initDelay) {
            prepareDOMElements(document);
            demoCanvas();
            /** expermimental carousel is not part of the DOM
             * so let the DOM get constructed first and then
             * inject the carousel */
            setTimeout(function () {
                initCarousel();
                initToolTips();
            }, initDelay || 100);
        }

        function revealSdpiWrapper() {
            const el = document.querySelector('.sdpi-wrapper');
            el && el.classList.remove('hidden');
        }

        // our method to pass values to the plugin
        function sendValueToPlugin(value, param) {
            if (websocket && (websocket.readyState === 1)) {
                const json = {
                    'action': actionInfo['action'],
                    'event': 'sendToPlugin',
                    'context': uuid,
                    'payload': {
                        [param]: value
                    }
                };
                websocket.send(JSON.stringify(json));
            }
        }

        if (!isQT) {
            document.addEventListener('DOMContentLoaded', function () {
                initPropertyInspector(100);
            });
        }

        /** the beforeunload event is fired, right before the PI will remove all nodes */
        window.addEventListener('beforeunload', function (e) {
            e.preventDefault();
            // since 4.1 this is no longer needed, as the plugin will receive a notification
            // right before the Property Inspector goes away
            sendValueToPlugin('propertyInspectorWillDisappear', 'property_inspector');
            // Don't set a returnValue to the event, otherwise Chromium with throw an error.  // e.returnValue = '';
        });

        /** the pagehide event is fired, when the view disappears */
        /*
        window.addEventListener('pagehide', function (event) {
        console.log('%c%s','background: green; font-size: 22px; font-weight: bold;','window --->> pagehide.');
        sendValueToPlugin('propertyInspectorPagehide', 'property_inspector');
        
        });
        */

        /** the unload event is fired, when the PI will finally disappear */
        /*
        window.addEventListener('unload', function (event) {
        console.log('%c%s','background: orange; font-size: 22px; font-weight: bold;','window --->> onunload.');
        sendValueToPlugin('propertyInspectorDisconnected', 'property_inspector');
        });
        */

        /** if you prefer, you can apply these listeners to PI's body, like so:
        *
        * <body onpagehide="sendValueToPlugin('propertyInspectorPagehide', 'property_inspector');">
        *
        * <body onunload="sendValueToPlugin('propertyInspectorDisconnected', 'property_inspector');">
        */

        /** CREATE INTERACTIVE HTML-DOM
        * where elements can be clicked or act on their 'change' event.
        * Messages are then processed using the 'handleSdpiItemClick' method below.
        */

        function prepareDOMElements(baseElement) {
            baseElement = baseElement || document;
            Array.from(baseElement.querySelectorAll('.sdpi-item-value')).forEach(
                (el, i) => {
                    const elementsToClick = [
                        'BUTTON',
                        'OL',
                        'UL',
                        'TABLE',
                        'METER',
                        'PROGRESS',
                        'CANVAS'
                    ].includes(el.tagName);
                    const evt = elementsToClick ? 'onclick' : onchangeevt || 'onchange';

                    /** Look for <input><span> combinations, where we consider the span as label for the input
                     * we don't use `labels` for that, because a range could have 2 labels.
                     */
                    const inputGroup = el.querySelectorAll('input + span');
                    if (inputGroup.length === 2) {
                        const offs = inputGroup[0].tagName === 'INPUT' ? 1 : 0;
                        inputGroup[offs].textContent = inputGroup[1 - offs].value;
                        inputGroup[1 - offs]['oninput'] = function () {
                            inputGroup[offs].textContent = inputGroup[1 - offs].value;
                        };
                    }
                    /** We look for elements which have an 'clickable' attribute
                     * we use these e.g. on an 'inputGroup' (<span><input type="range"><span>) to adjust the value of
                     * the corresponding range-control
                     */
                    Array.from(el.querySelectorAll('.clickable')).forEach(
                        (subel, subi) => {
                            subel['onclick'] = function (e) {
                                handleSdpiItemChange(e.target, subi);
                            };
                        }
                    );
                    /** Just in case the found HTML element already has an input or change - event attached, 
                     * we clone it, and call it in the callback, right before the freshly attached event
                    */
                    const cloneEvt = el[evt];
                    el[evt] = function (e) {
                        if (cloneEvt) cloneEvt();
                        handleSdpiItemChange(e.target, i);
                    };
                }
            );

            /**
             * You could add a 'label' to a textares, e.g. to show the number of charactes already typed
             * or contained in the textarea. This helper updates this label for you.
             */
            baseElement.querySelectorAll('textarea').forEach((e) => {
                const maxl = e.getAttribute('maxlength');
                e.targets = baseElement.querySelectorAll(`[for='${e.id}']`);
                if (e.targets.length) {
                    let fn = () => {
                        for (let x of e.targets) {
                            x.textContent = maxl ? `${e.value.length}/${maxl}` : `${e.value.length}`;
                        }
                    };
                    fn();
                    e.onkeyup = fn;
                }
            });

            baseElement.querySelectorAll('[data-open-url]').forEach(e => {
                const value = e.getAttribute('data-open-url');
                if (value) {
                    e.onclick = () => {
                        let path;
                        if (value.indexOf('http') !== 0) {
                            path = document.location.href.split('/');
                            path.pop();
                            path.push(value.split('/').pop());
                            path = path.join('/');
                        } else {
                            path = value;
                        }
                        $SD.api.openUrl($SD.uuid, path);
                    };
                } else {
                    console.log(`${value} is not a supported url`);
                }
            });
        }

        function handleSdpiItemChange(e, idx) {

            /** Following items are containers, so we won't handle clicks on them */

            if (['OL', 'UL', 'TABLE'].includes(e.tagName)) {
                return;
            }

            /** SPANS are used inside a control as 'labels'
             * If a SPAN element calls this function, it has a class of 'clickable' set and is thereby handled as
             * clickable label.
             */

            if (e.tagName === 'SPAN') {
                const inp = e.parentNode.querySelector('input');
                var tmpValue;

                // if there's no attribute set for the span, try to see, if there's a value in the textContent
                // and use it as value
                if (!e.hasAttribute('value')) {
                    tmpValue = Number(e.textContent);
                    if (typeof tmpValue === 'number' && tmpValue !== null) {
                        e.setAttribute('value', 0 + tmpValue); // this is ugly, but setting a value of 0 on a span doesn't do anything
                        e.value = tmpValue;
                    }
                } else {
                    tmpValue = Number(e.getAttribute('value'));
                }

                if (inp && tmpValue !== undefined) {
                    inp.value = tmpValue;
                } else return;
            }

            const selectedElements = [];
            const isList = ['LI', 'OL', 'UL', 'DL', 'TD'].includes(e.tagName);
            const sdpiItem = e.closest('.sdpi-item');
            const sdpiItemGroup = e.closest('.sdpi-item-group');
            let sdpiItemChildren = isList
                ? sdpiItem.querySelectorAll(e.tagName === 'LI' ? 'li' : 'td')
                : sdpiItem.querySelectorAll('.sdpi-item-child > input');

            if (isList) {
                const siv = e.closest('.sdpi-item-value');
                if (!siv.classList.contains('multi-select')) {
                    for (let x of sdpiItemChildren) x.classList.remove('selected');
                }
                if (!siv.classList.contains('no-select')) {
                    e.classList.toggle('selected');
                }
            }

            if (sdpiItemChildren.length && ['radio', 'checkbox'].includes(sdpiItemChildren[0].type)) {
                e.setAttribute('_value', e.checked); //'_value' has priority over .value
            }
            if (sdpiItemGroup && !sdpiItemChildren.length) {
                for (let x of ['input', 'meter', 'progress']) {
                    sdpiItemChildren = sdpiItemGroup.querySelectorAll(x);
                    if (sdpiItemChildren.length) break;
                }
            }

            if (e.selectedIndex) {
                idx = e.selectedIndex;
            } else {
                sdpiItemChildren.forEach((ec, i) => {
                    if (ec.classList.contains('selected')) {
                        selectedElements.push(ec.textContent);
                    }
                    if (ec === e) {
                        idx = i;
                        selectedElements.push(ec.value);
                    }
                });
            }

            const returnValue = {
                key: e.id && e.id.charAt(0) !== '_' ? e.id : sdpiItem.id,
                value: isList
                    ? e.textContent
                    : e.hasAttribute('_value')
                        ? e.getAttribute('_value')
                        : e.value
                            ? e.type === 'file'
                                ? decodeURIComponent(e.value.replace(/^C:\\fakepath\\/, ''))
                                : e.value
                            : e.getAttribute('value'),
                group: sdpiItemGroup ? sdpiItemGroup.id : false,
                index: idx,
                selection: selectedElements,
                checked: e.checked
            };

            /** Just simulate the original file-selector:
             * If there's an element of class '.sdpi-file-info'
             * show the filename there
             */
            if (e.type === 'file') {
                const info = sdpiItem.querySelector('.sdpi-file-info');
                if (info) {
                    const s = returnValue.value.split('/').pop();
                    info.textContent = s.length > 28
                        ? s.substr(0, 10)
                        + '...'
                        + s.substr(s.length - 10, s.length)
                        : s;
                }
            }

            sendValueToPlugin(returnValue, 'sdpi_collection');
        }

        function updateKeyForDemoCanvas(cnv) {
            sendValueToPlugin({
                key: 'your_canvas',
                value: cnv.toDataURL()
            }, 'sdpi_collection');
        }

        /** Stream Deck software passes system-highlight color information
        * to Property Inspector. Here we 'inject' the CSS styles into the DOM
        * when we receive this information. */


        function addDynamicStyles(clrs, fromWhere) {
            const node = document.getElementById('#sdpi-dynamic-styles') || document.createElement('style');
            if (!clrs.mouseDownColor) clrs.mouseDownColor = fadeColor(clrs.highlightColor, -100);
            const clr = clrs.highlightColor.slice(0, 7);
            const clr1 = fadeColor(clr, 100);
            const clr2 = fadeColor(clr, 60);
            const metersActiveColor = fadeColor(clr, -60);

            node.setAttribute('id', 'sdpi-dynamic-styles');
            node.innerHTML = `

input[type="radio"]:checked + label span,
input[type="checkbox"]:checked + label span {
    background-color: ${clrs.highlightColor};
}

input[type="radio"]:active:checked + label span,
input[type="radio"]:active + label span,
input[type="checkbox"]:active:checked + label span,
input[type="checkbox"]:active + label span {
  background-color: ${clrs.mouseDownColor};
}

input[type="radio"]:active + label span,
input[type="checkbox"]:active + label span {
  background-color: ${clrs.buttonPressedBorderColor};
}

td.selected,
td.selected:hover,
li.selected:hover,
li.selected {
  color: white;
  background-color: ${clrs.highlightColor};
}

.sdpi-file-label > label:active,
.sdpi-file-label.file:active,
label.sdpi-file-label:active,
label.sdpi-file-info:active,
input[type="file"]::-webkit-file-upload-button:active,
button:active {
  background-color: ${clrs.buttonPressedBackgroundColor};
  color: ${clrs.buttonPressedTextColor};
  border-color: ${clrs.buttonPressedBorderColor};
}

::-webkit-progress-value,
meter::-webkit-meter-optimum-value {
    background: linear-gradient(${clr2}, ${clr1} 20%, ${clr} 45%, ${clr} 55%, ${clr2})
}

::-webkit-progress-value:active,
meter::-webkit-meter-optimum-value:active {
    background: linear-gradient(${clr}, ${clr2} 20%, ${metersActiveColor} 45%, ${metersActiveColor} 55%, ${clr})
}
`;
            document.body.appendChild(node);
        };

        /** UTILITIES */

        /** Helper function to construct a list of running apps
        * from a template string.
        * -> information about running apps is received from the plugin
        */

        function sdpiCreateList(el, obj, cb) {
            if (el) {
                el.style.display = obj.value.length ? 'block' : 'none';
                Array.from(document.querySelectorAll(`.${el.id}`)).forEach((subel, i) => {
                    subel.style.display = obj.value.length ? 'flex' : 'none';
                });
                if (obj.value.length) {
                    el.innerHTML = `<div class="sdpi-item" ${obj.type ? `class="${obj.type}"` : ''} id="${obj.id || window.btoa(new Date().getTime().toString()).substr(0, 8)}">
        <div class="sdpi-item-label">${obj.label || ''}</div>
        <ul class="sdpi-item-value ${obj.selectionType ? obj.selectionType : ''}">
                ${obj.value.map(e => `<li>${e}</li>`).join('')}
            </ul>
        </div>`;
                    setTimeout(function () {
                        prepareDOMElements(el);
                        if (cb) cb();
                    }, 10);
                    return;
                }
            }
            if (cb) cb();
        };

        /** get a JSON property from a (dot-separated) string
        * Works on nested JSON, e.g.:
        * jsn = {
        *      propA: 1,
        *      propB: 2,
        *      propC: {
        *          subA: 3,
        *          subB: {
        *             testA: 5,
        *             testB: 'Hello'
        *          }
        *      }
        *  }
        *  getPropFromString(jsn,'propC.subB.testB') will return 'Hello';
        */
        const getPropFromString = (jsn, str, sep = '.') => {
            const arr = str.split(sep);
            return arr.reduce((obj, key) =>
                (obj && obj.hasOwnProperty(key)) ? obj[key] : undefined, jsn);
        };

        /*
        Quick utility to lighten or darken a color (doesn't take color-drifting, etc. into account)
        Usage:
        fadeColor('#061261', 100); // will lighten the color
        fadeColor('#200867'), -100); // will darken the color
        */
        function fadeColor(col, amt) {
            const min = Math.min, max = Math.max;
            const num = parseInt(col.replace(/#/g, ''), 16);
            const r = min(255, max((num >> 16) + amt, 0));
            const g = min(255, max((num & 0x0000FF) + amt, 0));
            const b = min(255, max(((num >> 8) & 0x00FF) + amt, 0));
            return '#' + (g | (b << 8) | (r << 16)).toString(16).padStart(6, 0);
        }

        /** Quick utility to inject a style to the DOM
        * e.g. injectStyle('.localbody { background-color: green;}')
        */
        function injectStyle(clrs) {
            const node = document.createElement('style');
            const tempID = window.btoa(new Date().getTime().toString()).slice(10, 18);
            node.setAttribute('id', tempID);
            node.innerHTML = clrs;
            document.body.appendChild(node);
            return tempID;
        };

        /** Quick utility to return a random color.
        * If the randomly generated string is less than 6 characters
        * pad it with '0'
        */
        function randomColor(prefix) {
            return (prefix || '') + (((1 << 24) * Math.random()) | 0).toString(16).padStart(6, 0); // just a random color padded to 6 characters
        }

        /** CANVAS DEMO */

        function demoCanvas() {
            const touchDevice = (('ontouchstart' in document.documentElement) && (navigator.platform != 'Win32'));
            const evtDown = touchDevice ? 'touchstart' : 'mousedown';
            const evtMove = touchDevice ? 'touchmove' : 'mousemove';
            const evtEnd = touchDevice ? 'touchend' : 'mouseup';
            const evtX = touchDevice ? 'pageX' : 'clientX';
            const evtY = touchDevice ? 'pageY' : 'clientY';

            const cnv = document.querySelector('canvas');
            if (!cnv) return;
            const ctx = cnv.getContext('2d');
            if (!ctx) return;
            function drawRandomCanvas() {
                const rad = cnv.height / 4;
                const cX = Math.random() * cnv.width;
                const cY = Math.random() * cnv.height;

                const grad = ctx.createLinearGradient(0, 0, 0, 170);
                const clr = randomColor();
                grad.addColorStop(0, fadeColor(clr, -100));
                grad.addColorStop(0.5, '#' + clr);
                grad.addColorStop(1, fadeColor(clr, 100));
                ctx.fillStyle = grad;

                //  ctx.fillStyle = randomColor();
                ctx.fillRect(0, 0, cnv.width, cnv.height);
                ctx.beginPath();
                ctx.arc(cX, cY, rad, 0, 2 * Math.PI, false);
                ctx.fillStyle = '#' + randomColor();
                ctx.fill();
                ctx.lineWidth = 5;
                ctx.strokeStyle = '#' + randomColor();
                ctx.stroke();
            }

            drawRandomCanvas();

            const pos = { x: 0, y: 0 };

            var el = document.querySelector('.sdpi-wrapper');
            cnv.addEventListener(evtDown, function (e) {
                if (e.shiftKey) {
                    drawRandomCanvas();
                    return;
                }
                pos.x = e[evtX] - cnv.offsetLeft + el.scrollLeft;
                pos.y = e[evtY] - cnv.offsetTop + el.scrollTop;
            });

            cnv.addEventListener(evtEnd, function (e) {
                e.target.value = cnv.toDataURL();
            });

            cnv.addEventListener(evtMove, function (e) {
                if (!touchDevice) {
                    if (!e.altKey || e.buttons !== 1) return;
                }
                e.preventDefault();

                ctx.beginPath();
                ctx.lineWidth = 5;
                ctx.lineCap = 'round';
                ctx.strokeStyle = '#061261';
                ctx.moveTo(pos.x, pos.y); // from
                pos.x = e[evtX] - cnv.offsetLeft + el.scrollLeft;
                pos.y = e[evtY] - cnv.offsetTop + el.scrollTop;
                ctx.lineTo(pos.x, pos.y); // to
                ctx.stroke();
            });

            updateKeyForDemoCanvas(cnv, cnv);
        }

        /** EXPERIMENTAL CAROUSEL  */

        function initCarousel() {
            document.querySelectorAll('.sdpi-item [type=carousel]').forEach((e, i, a) => {
                var m = e.querySelector('img');
                e.data = {
                    currentOffset: 0,
                    visibleCards: 3,
                    scrollDistance: m ? m.clientWidth + 10 : 70,
                    numCards: e.querySelectorAll('.card-carousel--card').length,
                    leftNav: e.querySelectorAll('.card-carousel--nav__left'),
                    rightNav: e.querySelectorAll('.card-carousel--nav__right'),
                    atStart: true,
                    atEnd: false
                };

                e.end = function () {
                    return e.data.currentOffset <= (e.data.scrollDistance * -1) * (e.data.numCards - e.data.visibleCards);
                };

                const cards = e.querySelector('.card-carousel-cards');

                e.move = function (direction) {
                    if (direction === 1 && !this.data.atEnd) {
                        this.data.currentOffset -= this.data.scrollDistance;
                    } else if (direction === -1 && !this.data.atStart) {
                        this.data.currentOffset += this.data.scrollDistance;
                    }

                    if (cards) {
                        cards.setAttribute('style', `transform:translateX(${this.data.currentOffset}px)`);
                        this.data.atStart = this.data.currentOffset === 0;
                        this.data.atEnd = this.end();
                        this.data.leftNav.forEach((ctl) => {
                            if (!this.data.atStart) ctl.removeAttribute('disabled');
                            else ctl.setAttribute('disabled', this.data.atStart);
                        });
                        this.data.rightNav.forEach((ctl) => {
                            if (!this.data.atEnd) ctl.removeAttribute('disabled');
                            else ctl.setAttribute('disabled', this.data.atEnd);
                        });
                    }
                };

                e.data.leftNav.forEach((nl) => {
                    nl.onclick = function () {
                        e.move(-1);
                    };
                });

                e.data.rightNav.forEach((nl) => {
                    nl.onclick = function () {
                        e.move(1);
                    };
                });

                e.querySelectorAll('.card-carousel--card').forEach((crd, idx) => {
                    crd.onclick = function (evt) {
                        handleSdpiItemClick(crd, idx);
                    };
                });
            });
        };


        function drag_start(event) {
            /**
             * In PI Samples the title-attribute is extracted to css and set
             * to an absolute position (at the bottom of the PI).
             * Since it is still part of the HTML-node, we just remove the title
             * attribute (otherwise the node will get extended so it includes the title
             * node too.)
             */
            // event.target.removeAttribute('title');
            event.target.removeAttribute('draggable');
            event.dataTransfer.effectAllowed = "all";
            var dataList = event.dataTransfer.items;
            /**
             * the following helper just formats the HTML, so the output
             * looks a bit nicer.
             */
            const prettifiedHTMLString = prettifyHTML(event.target.outerHTML);

            /**
             * Finally add the prettified string to the dragObjs data-container:
             */
            dataList.add(prettifiedHTMLString, "text/plain");

        }


        function dragTest() {
            const els = document.querySelectorAll('.sdpi-item');
            Array.from(els).forEach((e, i) => {
                //subel.style.display = obj.value.length ? 'flex' : 'none';
                e.addEventListener("dragstart", drag_start, false);
                e.setAttribute('draggable', "true");
                // e.ondragstart="drag_start(event)";
            });
            console.log("done");

        }

        function prettifyHTML(htmlStr) {
            const div = document.createElement('div');
            div.innerHTML = htmlStr.trim();
            return prettify(div, 0).innerHTML;
        }

        function prettify(node, level) {

            const spacesBefore = new Array(level++ + 1).join('  ');
            const spacesAfter = new Array(level - 1).join('  ');
            let textNode;

            Object.values(node.children).map(e => {
                textNode = document.createTextNode('\n' + spacesBefore);
                node.insertBefore(textNode, e);
                prettify(e, level);
                if (node.lastElementChild == e) {
                    textNode = document.createTextNode('\n' + spacesAfter);
                    node.appendChild(textNode);
                }
            });

            return node;
        }

        function rangeToPercent(value, min, max) {
            return (value / (max - min));
        };
        function initToolTips() {
            console.log("INITTOOLTIPS")
            const tooltip = document.querySelector('.sdpi-info-label');
            const arrElements = document.querySelectorAll('.floating-tooltip');
            arrElements.forEach((e, i) => {
                console.log("ELEMENTS:", e);
                initToolTip(e, tooltip)
            })
        }

        function initToolTip(element, tooltip) {

            const tw = tooltip.getBoundingClientRect().width;
            const suffix = element.getAttribute('data-suffix') || '';

            const fn = () => {
                const elementRect = element.getBoundingClientRect();
                const w = elementRect.width - tw / 2;
                const percnt = rangeToPercent(element.value, element.min, element.max);
                tooltip.textContent = suffix != "" ? `${element.value} ${suffix}` : String(element.value);
                tooltip.style.left = `${elementRect.left + Math.round(w * percnt) - tw / 4}px`;
                tooltip.style.top = `${elementRect.top - 32}px`;
            };

            if (element) {
                element.addEventListener('mouseenter', function () {
                    tooltip.classList.remove('hidden');
                    tooltip.classList.add('shown');
                    fn();
                }, false);

                element.addEventListener('mouseout', function () {
                    tooltip.classList.remove('shown');
                    tooltip.classList.add('hidden');
                    fn();
                }, false);
                element.addEventListener('input', fn, false);
            }
        }
    </script>
</body>

</html>